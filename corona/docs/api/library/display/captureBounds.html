<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Corona Docs: API > Libraries > display > captureBounds</title>
  <meta name="revised" content="16-May-2013" />
  <meta name="description" content="Whether you're new to Corona or want to take your app to the next level, we've got a wealth of resources for you including extensive documentation, API reference, sample code, and videos.  API > Libraries > display > captureBounds" />
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />
<script src="//www.coronalabs.com/wp-content/themes/corona-labs/js/docs.js"></script>
</head>
<body>
<div class="header"></div>
<div class="title">
	<span class="titleimg" onclick="window.location='http://docs.coronalabs.com/'"></span>
	<div id="nav">
		<ul>
<li><a href="../../index.html">SDK APIs</a></li>
<li><a href="../../../native/index.html">Enterprise APIs</a></li>
<li><a href="../../../plugin/index.html">Plugins</a></li>
<li><a href="../../../guide/index.html">Guides</a></li>
<li><a href="http://www.coronalabs.com/resources/tutorials/">Tutorials</a></li>
</ul>


		<div id="resources-link"><a href="http://www.coronalabs.com/resources/">Corona Resources</a> &#9657;</div>
	</div>
</div>

<div class="SearchBar">
  <form action="http://www.google.com/cse" id="cse-search-box">
  <input type="hidden" name="cx" value="009283852522218786394:g40gqt2m6rq" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" name="q" id="q" autocomplete="off" size="40" style="width:150px;float:left" />
  <input type="submit" name="sa" value="Search" style="float:right; font-size: 13px;" />
  </form>
</div>
<div id="TOC">
<ul>
<li><a href="#display.capturebounds">display.captureBounds()</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#gotchas">Gotchas</a><ul>
<li><a href="#mac">Mac</a></li>
<li><a href="#windows">Windows</a></li>
</ul></li>
<li><a href="#syntax">Syntax</a><ul>
<li><a href="#screenbounds-required">screenBounds <sub><sup>(required)</sup></sub></a></li>
<li><a href="#savetoalbum-optional">saveToAlbum <sub><sup>(optional)</sup></sub></a></li>
</ul></li>
<li><a href="#examples">Examples</a></li>
</ul></li>
</ul>
</div>
<div id="breadcrumb">
<a href="http://docs.coronalabs.com">Ξ</a>  ▸  <a href="../../index.html">API</a>  ▸  <a href="../index.html">Libraries</a>  ▸  <a href="index.html">display</a>  ▸  <a href="captureBounds.html">captureBounds</a>
</div>
<div class="section level1" id="display.capturebounds">
<h1><a href="#TOC">display.captureBounds()</a></h1>
<blockquote>
<table>
<tbody>
<tr class="odd">
<td align="left"><strong>Type</strong></td>
<td align="left"><a href="../../type/Function.html">Function</a></td>
</tr>
<tr class="even">
<td align="left"><strong>Library</strong></td>
<td align="left"><a href="index.html">display.*</a></td>
</tr>
<tr class="odd">
<td align="left"><strong>Return value</strong></td>
<td align="left"><a href="../../type/DisplayObject/index.html">DisplayObject</a></td>
</tr>
<tr class="even">
<td align="left"><strong>Revision</strong></td>
<td align="left"><a href="http://coronalabs.com/links/docs/current-corona-sdk">Current Public Release (2013.2076)</a></td>
</tr>
<tr class="odd">
<td align="left"><strong>Keywords</strong></td>
<td align="left">screenshot, capture bounds, save bounds</td>
</tr>
<tr class="even">
<td align="left"><strong>See also</strong></td>
<td align="left"><a href="save.html">display.save()</a><br/><a href="capture.html">display.capture()</a><br/><a href="captureScreen.html">display.captureScreen()</a></td>
</tr>
</tbody>
</table>
</blockquote>
<div class="section level2" id="overview">
<h2><a href="#TOC">Overview</a></h2>
<p>Captures a portion of the screen and returns it as a new <a href="../../type/DisplayObject/index.html">DisplayObject</a> positioned at the top-left corner of the screen. You can specify what portion of the screen to capture by passing in a rectangle to this function. You can optionally save the capture image as a file to the device's photo library.</p>
<p>Calling this method places the captured image on the screen on top of all other display objects. Use <a href="../../type/DisplayObject/removeSelf.html">object:removeSelf()</a> to remove this object from the screen (as with any other display object).</p>
<p>This capture function will only capture what is rendered in OpenGL. It will not capture native display objects such as text boxes, text fields, web popups, ads, etc.</p>
</div>
<div class="section level2" id="gotchas">
<h2><a href="#TOC">Gotchas</a></h2>
<p>If you need to capture a display object at application launch (i.e. when main.lua is executed to initialize the app) you must call display.captureBounds within a <a href="../timer/performWithDelay.html">timer.performWithDelay</a> call. A delay of 100ms is recommended. for Example:</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="kw">local</span> <span class="kw">function</span> captureWithDelay<span class="ot">()</span>
    <span class="kw">local</span> <span class="kw">screenBounds</span> <span class="ot">=</span>
    <span class="ot">{</span>
        <span class="kw">xMin</span> <span class="ot">=</span> <span class="dv">0</span>,
        <span class="kw">xMax</span> <span class="ot">=</span> <span class="dv">100</span>,
        <span class="kw">yMin</span> <span class="ot">=</span> <span class="dv">0</span>,
        <span class="kw">yMax</span> <span class="ot">=</span> <span class="dv">100</span>,
    <span class="ot">}</span>
    <span class="kw">local</span> <span class="kw">capture</span> <span class="ot">=</span> <span class="kw">display</span><span class="ot">.</span>captureBounds<span class="ot">(</span> <span class="kw">screenBounds</span> <span class="ot">)</span>
<span class="kw">end</span>

<span class="kw">timer</span><span class="ot">.</span>performWithDelay<span class="ot">(</span> <span class="dv">100</span>, <span class="kw">captureWithDelay</span> <span class="ot">)</span></code></pre>
<p>When saving to the photo album on Android, you must set the following permission in the &quot;build.settings&quot; file.</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="kw">settings</span> <span class="ot">=</span>
<span class="ot">{</span>
    <span class="kw">android</span> <span class="ot">=</span>
    <span class="ot">{</span>
        <span class="kw">usesPermissions</span> <span class="ot">=</span>
        <span class="ot">{</span>
            <span class="st">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span>,
        <span class="ot">}</span>,
    <span class="ot">}</span>,
<span class="ot">}</span></code></pre>
<div class="section level3" id="mac">
<h3><a href="#TOC">Mac</a></h3>
<p>Saves screen capture images as JPEG files to the current user's desktop.</p>
</div>
<div class="section level3" id="windows">
<h3><a href="#TOC">Windows</a></h3>
<p>Saves screen capture images as PNG files to the &quot;My Pictures\Corona Simulator&quot; directory.</p>
</div>
</div>
<div class="section level2" id="syntax">
<h2><a href="#TOC">Syntax</a></h2>
<pre><code>display.captureBounds( screenBounds [, saveToAlbum ] )</code></pre>
<div class="section level5" id="screenbounds-required">
<h5><a href="#TOC">screenBounds <sub><sup>(required)</sup></sub></a></h5>
<p><em><a href="../../type/Table.html">Table</a>.</em> Specifies the portion of the screen to capture as a rectangle whose bounds are in content coordinates. This table must contain the following properties or else an error will occur.</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="kw">local</span> <span class="kw">screenBounds</span> <span class="ot">=</span>
<span class="ot">{</span>
    <span class="kw">xMin</span> <span class="ot">=</span> <span class="dv">0</span>,
    <span class="kw">xMax</span> <span class="ot">=</span> <span class="dv">100</span>,
    <span class="kw">yMin</span> <span class="ot">=</span> <span class="dv">0</span>,
    <span class="kw">yMax</span> <span class="ot">=</span> <span class="dv">100</span>,
<span class="ot">}</span></code></pre>
<p>You can also pass in the bounds table returned by an <a href="../../type/DisplayObject/contentBounds.html">object.contentBounds</a> property, which will capture that object and everything behind it.</p>
<p>Note that this capture function can only capture what is displayed on screen. If the coordinates in this bounds table exceed the bounds of the screen, then the resulting capture image will be trimmed to the bounds of the screen. If the bounds table is completely outside of the screen, then this function will do nothing and return <code>nil</code>.</p>
</div>
<div class="section level5" id="savetoalbum-optional">
<h5><a href="#TOC">saveToAlbum <sub><sup>(optional)</sup></sub></a></h5>
<p><em><a href="../../type/Boolean.html">Boolean</a>.</em> If <code>true</code>, then it adds the image to your device’s photo album. For Android devices, you must set the <code>&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</code> permission for this to work.</p>
</div>
</div>
<div class="section level2" id="examples">
<h2><a href="#TOC">Examples</a></h2>
<p>How to capture the bottom-right quadrant of the screen.</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="co">-- Set up a bounds table for capturing the bottom-right quadrant of the screen.</span>
<span class="kw">local</span> <span class="kw">screenBounds</span> <span class="ot">=</span>
<span class="ot">{</span>
    <span class="kw">xMin</span> <span class="ot">=</span> <span class="kw">display</span><span class="ot">.</span><span class="kw">contentWidth</span> <span class="ot">/</span> <span class="dv">2</span>,
    <span class="kw">xMax</span> <span class="ot">=</span> <span class="kw">display</span><span class="ot">.</span><span class="kw">contentWidth</span>,
    <span class="kw">yMin</span> <span class="ot">=</span> <span class="kw">display</span><span class="ot">.</span><span class="kw">contentHeight</span> <span class="ot">/</span> <span class="dv">2</span>,
    <span class="kw">yMax</span> <span class="ot">=</span> <span class="kw">display</span><span class="ot">.</span><span class="kw">contentHeight</span>,
<span class="ot">}</span>

<span class="co">-- Capture the bounds of the screen.</span>
<span class="kw">local</span> <span class="kw">myCaptureImage</span> <span class="ot">=</span> <span class="kw">display</span><span class="ot">.</span>captureBounds<span class="ot">(</span><span class="kw">screenBounds</span><span class="ot">)</span></code></pre>
<p>How to capture the bounds of a display object.</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="co">-- Display a circle at the center of the screen.</span>
<span class="kw">local</span> <span class="kw">myCircle</span> <span class="ot">=</span> <span class="kw">display</span><span class="ot">.</span>newCircle<span class="ot">(</span><span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">50</span><span class="ot">)</span>
<span class="kw">myCircle</span><span class="ot">.</span><span class="kw">x</span> <span class="ot">=</span> <span class="kw">display</span><span class="ot">.</span><span class="kw">contentWidth</span> <span class="ot">/</span> <span class="dv">2</span>
<span class="kw">myCircle</span><span class="ot">.</span><span class="kw">y</span> <span class="ot">=</span> <span class="kw">display</span><span class="ot">.</span><span class="kw">contentHeight</span> <span class="ot">/</span> <span class="dv">2</span>

<span class="co">-- Capture the above circle object.</span>
<span class="kw">local</span> <span class="kw">myCaptureImage</span> <span class="ot">=</span> <span class="kw">display</span><span class="ot">.</span>captureBounds<span class="ot">(</span><span class="kw">myCircle</span><span class="ot">.</span><span class="kw">contentBounds</span><span class="ot">)</span></code></pre>
<p>How to write a capture image to the photo library.</p>
<pre class="sourceCode lua"><code class="sourceCode lua"><span class="co">-- Capture the entire stage, minus the letterbox area.</span>
<span class="co">-- To save to the photo library, you must set the second argument to true.</span>
<span class="kw">local</span> <span class="kw">myCaptureImage</span> <span class="ot">=</span> <span class="kw">display</span><span class="ot">.</span>captureBounds<span class="ot">(</span><span class="kw">display</span><span class="ot">.</span><span class="kw">currentStage</span><span class="ot">.</span><span class="kw">contentBounds</span>, <span class="kw">true</span><span class="ot">)</span>

<span class="co">-- Remove the returned capture image since we&#39;re only interested in saving to the photo library.</span>
<span class="co">-- Doing this immediately after the above function call prevents it from being drawn on screen.</span>
<span class="kw">myCaptureImage</span>:removeSelf<span class="ot">()</span>
<span class="kw">myCaptureImage</span> <span class="ot">=</span> <span class="kw">nil</span></code></pre>
<div id="footer">
<p style="font-size: 13px">
© 2013 Corona Labs Inc. All Rights Reserved. (Last updated: 16-May-2013)
</p>

<br />
<p>
<strong>Help us help you! Give us feedback on this page:</strong>
</p>

<ul>
<li>
<a href="https://coronalabs.wufoo.com/forms/z7p9w5/def/field3=api.library.display.captureBounds&field4=Current+Public+Release+%282013%2E2076%29" target="_blank">Love it</a>
</li>

<li>
<a href="https://coronalabs.wufoo.com/forms/z7p9m3/def/field103=api.library.display.captureBounds&field104=Current+Public+Release+%282013%2E2076%29" target="_blank">Like it, but...</a>
</li>

<li>
<a href="https://coronalabs.wufoo.com/forms/z7p8x1/def/field103=api.library.display.captureBounds&field104=Current+Public+Release+%282013%2E2076%29" target="_blank">Hate it</a>
</li>
</ul>
</div>

































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































</div>
</div>

</body>
</html>